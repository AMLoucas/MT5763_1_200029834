---
title: "MT5761 Individual Project"
output: html_document
author: 200029834
---
```{r setup, include=FALSE}
## Global chunk variables to se for all script.
knitr::opts_chunk$set(echo = TRUE,
                      eval = TRUE,
                      message = FALSE)
```

```{r}
## Functions that will be used in the program miltuple times.
deleteColumn <- function(dataFrame, columns){
  for (col in columns){
    dataFrame <- dataFrame %>%
      select(-col)
  }
  return(dataFrame)
}
```

 \ <!-- chnage line symbol -->
 
## INTRODUCTION :

<p>
The purpose of the individual project is to clean two data-sets which will later allow us to compare them and combine their data in a way where we will be able to obtain important information. In the project we are required to use version control system called 'git' and create a report using R Markdown.
</p>
<p>
During the process of the project we will be working with 2 specific data sets (CSV files.) 
  
  * BikeSeoul.csv
  * BikeWashingtonDC.csv
  
These two data sets contain the number of bikes rented at each hour in each of the continents/states. In the beginning the two given data sets are "messy"/not clean . In the project we will apply Data Wrangling to the data, resulting in having a "tidy"/clean data set. Once the files are in the correct format, we will create different plots to explore the relationships between rented bikes in  Washington, D.C., USA with Seoul, South Korea . We will also use the plots to examine if these numbers are determined by the weather conditions (Humidity, Temperature, Wind Speed). Once we visualize all these summaries, we will apply statistical analysis on the data to understand the relationship of the data even more and predict future outcomes. \
The given techniques will be applied on the two CSV files data:

  * Data Wrangling
  * Data Visualisation
  * Statistical modelling
  
</p>

## DATA WRANGLING :
```{r, echo=FALSE}
## Importing libraries needed to use specific functions commands.
library(lubridate)
library(tidyverse)
```

### Seoul, South Korea Data File beginning state
```{r,}
seoul_Bikes <- read.csv("BikeSeoul.csv")
head(seoul_Bikes)
```

<p>
Above we can see the  beginning state of the file("BikeSeoul.csv"). We can notice that their are some issues with the Data Structure of the data set.
  
  * Column names are too long [Rented.Bike.Count, Solar.Radiation..MJ.m2., ...]
  * Unclear column names (too much notation that creates confusion) [Dew.point.temperature.C. ,]
  * Values are too long and take more time to code ['No Holiday']

These problems create clutter in the data and make it harder for us to understand it. In the first glimpse the data is difficult to read and extract estimates.
</p>
<br><br />

#### [TASK 1]
<p>
Our first task in our Data Wrangling is to remove all the rows that indicate a bike was not rented, after remove the column 'Functioning Day' which specifies this data. \
**Implemantation idea** \
Column 'Functioning Day' states if a bike was rented or not. We will have to filter through the rows and obtaining the records that have value "Yes" for attribute 'Functioning Day'. These are the records that a bike was rented. Once we have obtained these rows we can remove the column 'Functioning Day'.
</p>
```{r}
## Number of rows before removing unneeded records are:
nrow(seoul_Bikes)
seoul_Bikes <- seoul_Bikes %>%
  filter(Functioning.Day != "No") %>% ## Collect rows with value Yes in column Functioning.Day
  select(-Functioning.Day) ## Remove column Functioning.Day
## Number of rows after removing unneeded records are:
nrow(seoul_Bikes)
```
<br><br />

#### [TASK 2]
<p>
Our second task is to rename some column names to more appropriate ones. \
From our first glimpse of the table we can notice that some column names do not have appropriate names.

  * 'Rented.Bike.Count' to 'Count'
  * 'Temperature.C.' to 'Temperature'
  * 'Wind.speed..m.s.' to 'WindSpeed'
  * 'Seasons' to 'Season'
  * 'Humidity...' to 'Humidity'

**Implemantation idea** \
Using function rename() from tidyverse we can simply rename the column names to more appropriate ones.
</p>
```{r}
## Header Names before Renaming
names(seoul_Bikes)
seoul_Bikes <- seoul_Bikes %>%
  rename(Count = Rented.Bike.Count, ## Using function we are renaming the columns.
         Temperature = Temperature.C., 
         WindSpeed = Wind.speed..m.s., 
         Season = Seasons,
         Humidity = Humidity...)
## Header Names after Renaming
names(seoul_Bikes)
```
<br><br />

#### [TASK 3] 
<p>
Our third task is to convert column Date from type 'character' to type to 'Date'. \
**Implemantation idea** \
With the help of tidyverse function 'as_date()' we will change the type/class of the attribute.
</p>
```{r}
## Printing class of column Date before mutation.
class(seoul_Bikes$Date)
seoul_Bikes <- seoul_Bikes %>%
  mutate(Date = (as_date(parse_date_time(Date,"dmy")))) ## we need to specify 'dmy' to tell function in what format our date is in now. Because the format of R is in Years-Months-Days
## Printing class of column Date after mutation.
class(seoul_Bikes$Date)
```
<br><br />

#### [TASK 4]]
<p>
Our fourth task is to add a new column with name 'FullDate' which will hold the Date and Hour of the day the bike was rented in format 'Y-M-D H:M:S' \
**Implemantation idea** \
With help of package lubridate we have a function called 'make_datetime' which does this action for us in the format asked.
</p>
```{r}
## Printing column names to show that FullDate does not exist.
names(seoul_Bikes)
## as.integer(format(Date, format="%Y") -> this command is needed to extract the correct number/attribute from column Date. "%Y" tells the function to extract the year. as.integer() converts the character into an integer becasue field year expects as integer number. All work the same [month, day, hour]
seoul_Bikes <- seoul_Bikes %>%
  mutate(FullDate = make_datetime( year = as.integer(format(Date, format="%Y"))
                                  , month = as.integer(format(Date, format="%m"))
                                  ,day = as.integer(format(Date, format="%d"))
                                  , hour = Hour , min = 0, sec = 0 ))

## Printing column names to show creation of FullDate.
names(seoul_Bikes)
## Printing first 6 rows of FullDate to show the value is in correct format.
head(seoul_Bikes$FullDate)
```
<br><br />

#### [TASK 5] 
<p>
Our fifth task is to change Holiday values:
  
  * 'No Holiday' to 'No'
  * 'Holiday' to 'Yes'

Additionally to change the column type/class from 'character' to 'factor'. \
The reason we want to apply this change is to be able order our data to the bikes rented during a holiday and the onces rented when it was not a holiday. Factor type allows us to categorize data. \
**Implemantation idea** \
Using tidyverse function mutate in combination with ifelse conditional statement we will change the record values. Once the inputs have changed we create it to factors/category with the order :

  * Yes > No

</p>
```{r}
## Printing the 6 fist rows to show factor values before changing
head(seoul_Bikes$Holiday)
## Printing the class of Holiday to show its a 'character'
class(seoul_Bikes$Holiday)
seoul_Bikes <- seoul_Bikes %>%
  mutate(Holiday = ifelse(Holiday == "No Holiday", "No", "Yes")) %>% ## Changing values to Yes & No
  mutate(Holiday = factor(Holiday, levels = c("Yes", "No"))) ## Changing type to factor with seq order.
## Printing the 6 fist rows to show factor values have changed.
head(seoul_Bikes$Holiday)
## Printing the class of Holiday to show its a 'factor'
class(seoul_Bikes$Holiday)
```
<br><br />

#### [TASK 6] 
<p>
Our sixth task is to change the order of the Factor levels from column Season to the order:

  * Spring
  * Summer
  * Autumn
  * Winter

From highest to lowest. \
**Implemantation idea** \
Using tidyverse 'mutate()' function, we will convert the column to a factor and specify the order of the levels we want.
</p>
```{r}
## Printing class of the column to show its not a factor yet.
class(seoul_Bikes$Season)
seoul_Bikes <- seoul_Bikes %>%
  mutate(Season = factor(Season, levels = c("Spring", "Summer", "Autumn", "Winter")))
## Printing the 6 fist rows to show factor levels order after the change of class
head(seoul_Bikes$Season)
```
<br><br />

#### [TASK 7]
<p>
Our seventh and final task for cleaning the first data set is to removing unwanted columns : 

 * visibility
 * dew point temperature
 * solar radiation
 * rainfall
 * snowfall

**Implemantation idea** \
Using tidyverse function 'select' and the notation of the '-' we will remove the unwanted columns
</p>
```{r}
## Printing the column names of the table before removing unwanted data.
names(seoul_Bikes)
## Calling a self-declared function to undertaken given task.
seoul_Bikes <- seoul_Bikes %>%
  deleteColumn( c("Visibility..10m.",
                  "Solar.Radiation..MJ.m2.",
                  "Rainfall.mm.",
                  "Dew.point.temperature.C.",
                  "Snowfall..cm."))

## Printing column names and first 6 rows to show the end result of the data that has been cleaned.
names(seoul_Bikes)
```
<br><br />
<p>
After applying all these methods on the data set, we managed to clean the data and bring it to a 'tidy' state. Now the data is easier to read and manipulate in plotting and statistical analysis.
</p>
###### The result of Seoul, South Korea Data File after Data Wrangling is : 
```{r,}
head(seoul_Bikes)
```
<br><br />

### Washington DC, USA Data File beginning state
```{r,}
washington_Bikes <- read.csv("BikeWashingtonDC.csv")
head(washington_Bikes)
```
<p>
Above we can see the  beginning state of the file ("BikeWashingtonDC.csv"). We can notice that their are some issues with the Data Structure of the data set.
  
  * Column names are acronyms, users can distinguish differently [cnt, temp, atemp, hum, ...]
  * Values are not clear [Column season has values (1,2,3,4), which number represents which season?]
  * Some values are in binary values which not evryone understands [holiday, workingday]
  * We have some kind of repeated data [dteday -> (yr,mnth,weekday)], [workingday is the same as holiday]

These problems create clutter in the data and make it harder for us to understand it. In the first glimpse the data is difficult to read and extract estimates.
</p>
<br><br />

#### [TASK 1]
<p>
Our first task in our Data Wrangling for the file ("BikeWashingtonDC.csv") is to remove all some columns that are unwanted and create repeatition in our data. \

  * instant (unique number for each record)
  * yr (year)
  * mnth (month)
  * weekday (day of the week)
  * workingday (if the specific day was a holiday or not)
  * weathersit (weather condition)
  * atemp (normalized feeling temparature)
  * casual (number of bikes rented by casul users)
  * registered (number of bikes rented by registered users)
  
**Implemantation idea** \
Using function select() form tidyverse package and the notation '-' we can select all the columns we want to remove.
</p>
```{r}
## Columns in the file before removing
names(washington_Bikes)
## Calling self-declared function to undertake given task 
washington_Bikes <- washington_Bikes %>%
  deleteColumn( c("instant",
                  "yr",
                  "mnth",
                  "weekday",
                  "workingday",
                  "weathersit",
                  "atemp",
                  "casual",
                  "registered"))
## Columns in file after removing.
names(washington_Bikes)
```
<br><br />

#### [TASK 2]
<p>
Our second task is to rename the remaining to columns to match exactly as the seoul file. Making the columns names exactly the same will help with creating a combination of the two tables (join), so it has to be the same case aswell. \

 * 'dteday' to 'Date'
 * 'cnt' to 'Count'
 * 'hr' to 'Hour'
 * 'temp' to 'Temperature'
 * 'hum' to 'Humidity'
 * 'windspeed' to 'WindSpeed'
 * 'season' to 'Season'
 * 'holiday' to 'Holiday'
 
**Implemantation idea** \
Using function rename() form tidyverse package we can rename the already existing column names.
</p>
```{r}
## Header Names before Renaming
names(washington_Bikes)
washington_Bikes <- washington_Bikes %>%
  rename(Count = cnt, ## Using function we are renaming the columns.
         Temperature = temp, 
         WindSpeed = windspeed, 
         Season = season,
         Humidity = hum,
         Date = dteday,
         Hour = hr,
         Holiday = holiday)
## Header Names after Renaming
names(washington_Bikes)

```
<br><br />

#### [TASK 3]
<p>
Our third task is to convert the Humidity field's values to a percentage. At the moment the field Humidity in the two files are given two different measurements, we will have both in percentage after this task. \

 * Value is divided by 100 at the moment, so we will need to multiply it by 100 to get it to a % value.
  
**Implemantation idea** \
Using function mutate() from tidyverse package we can modify the existing columnn and its fields.
</p>
```{r}
## Printing first 6 rows to show the value now in decimal
head(washington_Bikes$Humidity)
washington_Bikes <- washington_Bikes %>%
  mutate(Humidity = Humidity * 100) ## multiply existing value with 100 to make a percentage value.
## Printing first 6 rows to show values out of a hundred (in %), smallest is 0 and largest 100.
head(washington_Bikes$Humidity)
```
<br><br />

#### [TASK 4]
<p>
Our fourth task is to convert the Temperature field's values to degree celsius At the moment the field Temperature in the two files are given two different measurements, we will have both in percentage after this task. Temperature in Washington file is normalized. \

 * Value is normalized which means formula $[(value -Tmin)/Tmax-Tmin]$ was applied on it. [Tmin = -8, Tmax = 39]
 * We have to reverse this fomrula which means we have to apply formula $[(value)*(Tmax-Tmin)+Tmin] $. [Tmin = -8, Tmax = 39]

**Implemantation idea** \
Using function mutate() from tidyverse package we can modify the existing columnn and its fields.
</p>
```{r}
## Printing first 6 rows to show the value are now normalized.
head(washington_Bikes$Temperature)

Tmin <- -8
Tmax <- 39
washington_Bikes <- washington_Bikes %>%
  mutate(Temperature = (Temperature)*(Tmax-Tmin)+Tmin) ## apply formula so we convert back to degree celsius.
## Printing first 6 rows to show values out of in degree celsius.
head(washington_Bikes$Temperature)
```
<br><br />

#### [TASK 5]
<p>
Our fifth task is to convert the WindSpeed field's values to m/s At the moment the field WindSpeed in the two files are given two different measurements, we will have both in percentage after this task. WindSpeed fieald in washinghton file is divided by 69km/s while in the Seoul file is in m/s \

  * First we need to conver WindSpeed to km/s, so we multiply by 69 because its divided by 69km/x
  * After we apply the given formula $"Wind (m/s) = 0.2777778 Ã— Wind (km/h)"$ formula was found found from [goodcalculator.com](https://goodcalculators.com/wind-speed-converter/)
  
**Implemantation idea** \
Using function mutate() from tidyverse package we can modify the existing columnn and its fields.
</p>
```{r}
## Printing first 6 rows to show the value are in (km/s)/69
head(washington_Bikes$WindSpeed)
makeToKM <- 69
multiplayerConstant <- 0.2777778
washington_Bikes <- washington_Bikes %>%
  mutate(WindSpeed = ((WindSpeed)*(makeToKM))*multiplayerConstant) ## apply formula so we convert back to degree m/s
## Printing first 6 rows to show values are now in m/s
head(washington_Bikes$WindSpeed)
```
<br><br />

#### [TASK 6]
<p>
Our sixth task is to change the values of field season. After convert the class to a factor and give the factor levels a specific order. \
 
 * '1' to 'Winter'
 * '2' to 'Spring'
 * '3' to 'Summer'
 * '4' to 'Autumn'
 
The order the levels must follow are:

 * Spring > Summer > Autumn > Winter 
 
**Implemantation idea** \
Using function mutate() form tidyverse package and ifelse conditional statement we will change the fields values. After by using the mutate() function from tidyverse we can change the class of the field  to a factor.
</p>
```{r}
## Printing the 6 fist rows to show factor values before changing
head(washington_Bikes$Season)
## Printing the class of Season to show its a 'integer'
class(washington_Bikes$Season)
washington_Bikes <- washington_Bikes %>%
  mutate(Season = ifelse(Season == 1, "Winter", Season)) %>% ## Changing values to the appropriate factors Winter | Summer | Autumn | Spring.
  mutate(Season = ifelse(Season == 2, "Spring", Season)) %>% 
  mutate(Season = ifelse(Season == 3, "Summer", Season)) %>% 
  mutate(Season = ifelse(Season == 4, "Autumn", Season)) %>% 
  mutate(Season = factor(Season, levels = c("Spring", "Summer", "Autumn", "Winter"))) ## Changing type to factor with seq order.
## Printing the 6 fist rows to show factor values have changed.
head(washington_Bikes$Season)
## Printing the class of Season to show its a 'factor'
class(washington_Bikes$Season)

```
<br><br />

#### [TASK 7]
<p>
Our seventh task is to convert the Holiday values to Yes or No. After we need to convert the type to  factor, so the data can be categorzied. \
  
  * 0 to 'No'
  * 1 to 'Yes'

**Implemantation idea** \
Using function mutate() form tidyverse package and ifelse conditional statement we will change the fields values. After by using the mutate() function from tidyverse we can change the class of the field  to a factor.
</p>
```{r}
## Printing the 6 fist rows to show factor values before changing
head(washington_Bikes$Holiday)
## Printing the class of Holiday to show its a 'character'
class(washington_Bikes$Holiday)
washington_Bikes <- washington_Bikes %>%
  mutate(Holiday = ifelse(Holiday == 0, "No", "Yes")) %>% ## Changing values to Yes & No (0=No, 1=Yes).
  mutate(Holiday = factor(Holiday, levels = c("Yes", "No"))) ## Changing type to factor with seq order.
## Printing the 6 fist rows to show factor values have changed.
head(washington_Bikes$Holiday)
## Printing the class of Holiday to show its a 'factor'
class(washington_Bikes$Holiday)
```
<br><br />

#### [TASK 8]
<p>
Our eight task is to convert the class of field Date from 'character' to 'Date'. \

**Implemantation idea** \
With the help of tidyverse function 'as_date()' we will change the type/class of the attribute to date.
</p>
```{r}
## Printing class of column Date before mutation.
class(washington_Bikes$Date)
washington_Bikes <- washington_Bikes %>%
  mutate(Date = (as_date(parse_date_time(Date,"ymd")))) ## we need to specify 'ymd' to tell function in what format our date is in now. Because the format of R is in Years-Months-Days
## Printing class of column Date after mutation.
class(washington_Bikes$Date)
```
<br><br />

#### [TASK 9]
<p>
Our ninth task is to add a new column with name 'FullDate' which will hold the Date and Hour of the day the bike was rented, in format 'Y-M-D H:M:S' \
**Implemantation idea** \
With help of package lubridate we have a function called 'make_datetime' which does this action for us in the format asked.
</p>
```{r}
## Printing column names to show that FullDate does not exist.
names(washington_Bikes)
## as.integer(format(Date, format="%Y") -> this command is needed to extract the correct number/attribute from column Date. "%Y" tells the function to extract the year. as.integer() converts the character into an integer becasue field year expects as integer number. All work the same [month, day, hour]
washington_Bikes <- washington_Bikes %>%
  mutate(FullDate = make_datetime( year = as.integer(format(Date, format="%Y"))
                                  , month = as.integer(format(Date, format="%m"))
                                  ,day = as.integer(format(Date, format="%d"))
                                  , hour = Hour , min = 0, sec = 0 ))

## Printing column names to show creation of FullDate.
names(washington_Bikes)
## Printing first 6 rows of FullDate to show the value is in correct format.
head(washington_Bikes$FullDate)
```
<br><br />
<p>
After applying all these methods on the data set, we managed to clean the data and bring it to a 'tidy' state. Now the data is easier to read and manipulate in plotting and statistical analysis. Additionally the data is now in the same state as Seoul file which will allow us to join/combile the data sets and explore different relationships
</p>
###### The result of Seoul, South Korea Data File after Data Wrangling is : 
```{r,}
head(washington_Bikes)
```
<br><br />

## DATA VISUALISATION :


 \
 \
 \
 \
 \
 \
 \
 \
 \
 \

Show a link [name you wany yo show](www.google.com)




```{r, message=FALSE, fig.align='center', fig.height=8}
## aligns the plot/figure in the center
## height/width gives size  in inches



```







